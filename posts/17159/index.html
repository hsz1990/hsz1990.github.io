<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keyword"  content="">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        http学习笔记
        
    </title>

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/aircloud.css">

    
<link rel="stylesheet" href="/css/gitment.css">

    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
<meta name="generator" content="Hexo 4.2.0"></head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i>  </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar ">
            <img src="/images/avatar.gif" />
        </div>
        <div class="name">
            <i>hsz199086@163.com</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li >
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>搜索</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#http学习笔记"><span class="toc-text">http学习笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-http协议"><span class="toc-text">1.http协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-工作原理"><span class="toc-text">2.工作原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-http的各种版本"><span class="toc-text">3.http的各种版本</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-HTTPS"><span class="toc-text">4.HTTPS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-SPDY及HTTP2-0"><span class="toc-text">5.SPDY及HTTP2.0</span></a></li></ol></li></ol></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>

        <div class="index-about-mobile">
            <i>  </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        http学习笔记
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2020-03-05 23:28:33</span></span>
        
        <span class="attr">标签：/
        
        <a class="tag" href="/tags/#http" title="http">http</a>
        <span>/</span>
        
        <a class="tag" href="/tags/#https" title="https">https</a>
        <span>/</span>
        
        <a class="tag" href="/tags/#spdy" title="spdy">spdy</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content ">
        <h2 id="http学习笔记"><a href="#http学习笔记" class="headerlink" title="http学习笔记"></a>http学习笔记</h2><h4 id="1-http协议"><a href="#1-http协议" class="headerlink" title="1.http协议"></a>1.http协议</h4><ul>
<li>http是一个简单的纯文本、无状态的、面向连接的应用层协议，通常运行在TCP之上，目前http最新版本是2.0。  </li>
<li>http协议请求和响应消息的头以ASCII码形式给出；而消息内容则具有一个类似MIME的格式。  </li>
<li>http请求报文包括:请求行、请求头部、空行、请求数据。<br><img src="/images/http-01.jpg" alt="请求报文结构">  </li>
<li>http应答报文包括:状态行、响应头、空行、数据。<br><img src="/images/http-02.png" alt="响应报文结构">  </li>
<li>http协议运行在OSI七层概念模型中的应用层<br><img src="/images/http-04.png" alt="OSI七层概念模型"><ul>
<li>应用层：负责解决业务问题  </li>
<li>表示层：负责把网络中的消息转换成应用层可以读取的消息  </li>
<li>会话层：负责建立会话、握手、维持连接、关闭  </li>
<li>传输层：负责解决进程与进程之间的通信，例如TCP保证报文的可达性和流量的控制  </li>
<li>网络层：负责解决广域网（Internet）中主机之间数据的传递<br>网络层  </li>
<li>数据链路层：负责局域网中根据MAC地址连接的相应的交换机/路由器进行报文的转发  </li>
<li>物理层：物理传输介质  </li>
</ul>
</li>
</ul>
<h4 id="2-工作原理"><a href="#2-工作原理" class="headerlink" title="2.工作原理"></a>2.工作原理</h4><p>HTTP是基于客户/服务器模式，且面向连接的。典型场景是浏览器发起HTTP请求：  </p>
<ol>
<li>服务器监听80等web端口，浏览器从URL中解析出域名  </li>
<li>浏览器根据域名查询DNS从而获取到对于的IP地址  </li>
<li>通过查询到的IP地址与服务器建立TCP链接（如果是https协议还需要万TLS/SSL握手）  </li>
<li>构造HTTP请求，在这个过程中填充上下文至HTTP头部  </li>
<li>浏览器发送HTTP请求，服务器收到HTTP请求后将HTML页面作为包体返回给浏览器  </li>
<li>浏览器引擎解析响应，渲染包体至用户界面，并根据超链接构造其他的HTTP请求<br><img src="/images/http-03.png" alt="浏览器发起HTTP请求背后">  </li>
</ol>
<h4 id="3-http的各种版本"><a href="#3-http的各种版本" class="headerlink" title="3.http的各种版本"></a>3.http的各种版本</h4><p>http发展至今经历了0.9/1.0/1.1/2.0四个版本，目前大部分网站使用的是http1.0/1.1协议，http2.0还在普及中。</p>
<ul>
<li>0.9协议就是一个交换信息的无序协议，仅仅限于文字，1.0协议对每一次请求/响应建立并拆除一次连接，其特点是简单、易于管理，1.1在1.0基础上支持持久连接, 可以在同一个tcp的连接中可以传送多个HTTP请求和响应，2.0在1.0和1.1两个版本的基础上引入二进制数据帧和流的概念</li>
<li>在http协议的发展历程中还有两个重要的协议https和spdy</li>
</ul>
<h4 id="4-HTTPS"><a href="#4-HTTPS" class="headerlink" title="4.HTTPS"></a>4.HTTPS</h4><p>HTTPS是在HTTP上建立SSL加密层，并对传输数据进行加密，是HTTP协议的安全版，不同于HTTP基于应用层,HTTPS基于传输层  </p>
<ul>
<li>HTTPS协议的主要功能基本都依赖于TLS/SSL协议<br><img src="/images/http-05.png" alt="TLS/SSL协议"></li>
<li>通过第三方机构CA和证书确保服务器身份的合法性<br><img src="/images/http-06.png" alt="TLS/SSL协议">  <ul>
<li>证书=公钥+申请者与颁发者信息+签名</li>
<li>CA负责审核信息，然后对关键信息利用私钥进行”签名”，公开对应的公钥，客户端可以利用公钥验证签名。</li>
</ul>
</li>
<li>HTTPS优势在于身份验证、信息加密与完整性校验等，且未对TCP和HTTP协议做任何修改。但代价是HTTPS协议的性能损耗，包括增加延时(握手过程)以及消耗较多的CPU资源(RSA解密等)</li>
</ul>
<h4 id="5-SPDY及HTTP2-0"><a href="#5-SPDY及HTTP2-0" class="headerlink" title="5.SPDY及HTTP2.0"></a>5.SPDY及HTTP2.0</h4><p>SPDY是Google开发的基于TCP的会话层协议，用以最小化网络延迟，提升网络速度，优化用户的网络使用体验。SPDY是对HTTP协议的增强。特性：</p>
<ul>
<li>单连接多路复用。在同一个域名下，SPDY只使用一个连接来加载一个页面的所有资源，在这个连接中可以打开多个流来同时传输数据</li>
<li>全双工，支持服务器推送。SPDY的流是双向的，允许服务器主动的同客户端建立流。SPDY通过Server Push和Server Hint技术，主动的向客户端推送资源，同时不发送已经缓存的资源<ul>
<li>服务器推送（server push）指的是，还没有收到浏览器的请求，服务器就把各种资源推送给浏览器。比如，浏览器只请求了index.html，但是服务器把index.html、style.css、example.png全部发送给浏览器。这样的话，只需要一轮 HTTP 通信，浏览器就得到了全部资源，提高了性能。</li>
<li>server暗示（server hint）和server push不同的是，server hint并不会主动推送内容，只是告诉有新的内容产生，内容的下载还是需要客户端主动发起请求。一般应用场景是客户端需要先查询server状态，然后再下载资源，可以节约一次查询请求。</li>
</ul>
</li>
<li>压缩HTTP头：SPDY通过zlib对HTTP头进行了压缩，并强制开启HTTP BODY的Gzip压缩</li>
<li>请求分级，重要的资源优先传送。SPDY通过建立0~7的优先级，使服务器会优先处理优先级高的请求</li>
<li>强制使用 SSL传输协议：SPDY为了安全强制使用安全协议，通过压缩和优先级策略来弥补安全协议的性能问题<br>存在的问题</li>
<li>多域名请求下同样要建立多条连接</li>
<li>SSL/TLS协议的性能问题</li>
<li>所有头部名都需要小写</li>
<li>客户端必须支持 gzip 压缩</li>
<li>Google已经不再支持SPDY</li>
</ul>
<p>HTTP2.0是SPDY的升级，它采用了SPDY很多的特性和技术，但和SPDY还是有区别：</p>
<ul>
<li>HTTP2.0支持明文传输，SPDY强制使用SSL/TLS</li>
<li>HTTP2.0采用HPACK算法压缩消息头</li>
<li>HTTP2.0对数据报文重新定义了二进制格式  </li>
</ul>
<p>HTTP2.0消息被分成很小的消息和帧,然后每个消息和帧用二进制编码。客户端和服务端都采用二进制编码和解码。</p>
<blockquote>
<p>流：已经建立的连接之间双向流动的字节，它能携带一个至多个消息。<br>消息：一个完整的帧序列，它映射到逻辑的请求和响应消息。<br>帧：在HTTP/2通信的最小单元。每个桢包括一个帧头，里面有个很小标志，来区别是属于哪个流。  </p>
</blockquote>
<ul>
<li>所有的通信都建立在一个TCP连接上，可以传递大量的双向流通的流。</li>
<li>每个流都有独一无二的标志和优先级。</li>
<li>每个消息都是逻辑上的请求和相应消息。由一个或者多个帧组成。</li>
<li>来自不同流的帧可以通过帧头的标志来关联和组装起来。</li>
</ul>

        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>

    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        

        

    </ul>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>  Theme <a href="https://github.com/aircloud/hexo-theme-aircloud" target="_blank" rel="noopener">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="/js/jquery.min.js"></script>

<script src="/js/index.js"></script>

<script async src="/js/busuanzi.pure.mini.js"></script>




</html>
